- clean: []
- link: {}
- shell:
    - command: sudo apt update
    - command: |
        sudo apt install -y \
        autoconf \
        automake \
        build-essential \
        checkinstall \
        libtool \
        texinfo
      stdout: true
      stderr: true
    - command: |
        sudo apt install -y \
        texlive-base
      stdout: true
      stderr: true
    - command: |
        # libgtk-3-dev \
        sudo apt install -y \
        libgif-dev \
        libgnutls-dev \
        libjpeg-dev \
        libmagick++-dev \
        libncurses5-dev \
        libpng-dev \
        librsvg2-dev \
        libtiff5-dev \
        libxft-dev \
        libxpm-dev
      stdout: true
      stderr: true
    - command: |
        # --with-sound=alsa
        # --with-xtoolkit=gtk3
        # --with-xwidgets
        echo $(pwd) && \
        cd packages/emacs && \
        ./autogen.sh git && ./autogen.sh autoconf && \
        ./configure --prefix=/usr \
            --sysconfdir=/etc \
            --libexecdir=/usr/lib \
            --localstatedir=/var \
            --mandir=/usr/share/man \
            --with-xft \
            --with-modules \
            --without-gconf \
            --without-gsettings \
            --without-compress-install
      stdout: true
      stderr: true
    - command: |
        cd packages/emacs && \
        make -j4 && sudo make install
      stdout: true
      stderr: true
